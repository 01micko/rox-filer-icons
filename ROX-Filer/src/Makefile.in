SHELL = @SHELL@
srcdir = @srcdir@
PLATFORM_DIR = @bindir@
LIBS = @LIBS@
.SUFFIXES:
.SUFFIXES: .c .o

CC = @CC@
IMLIB_CFLAGS = @IMLIB_CFLAGS@
IMLIB_LIBS = @IMLIB_LIBS@
CFLAGS = @CFLAGS@ `gtk-config --cflags` -I.
LDFLAGS = @LDFLAGS@ `gtk-config --libs` ${LIBS} ${IMLIB_LIBS}
EXEC = ${PLATFORM_DIR}/${PROG}

############ Things to change for different programs

PROG = ROX-Filer

SRCS = main.c filer.c support.c gui_support.c pixmaps.c menu.c dnd.c \
       run.c mount.c options.c choices.c gtksavebox.c type.c action.c \
       collection.c fscache.c dir.c minibuffer.c modechange.c find.c

OBJECTS = main.o filer.o support.o gui_support.o pixmaps.o menu.o dnd.o \
	  run.o mount.o options.o choices.o gtksavebox.o type.o action.o \
	  collection.o fscache.o dir.o minibuffer.o modechange.o find.o

############ Things to keep the same

${EXEC}: ${PLATFORM_DIR} ${OBJECTS}
	${CC} -o ${EXEC} ${OBJECTS} ${LDFLAGS}

${PLATFORM_DIR}:
	mkdir ${PLATFORM_DIR}

clean:
	rm -f *.o Makefile.bak

depend:
	makedepend -- $(CFLAGS) -- $(SRCS)

############ Special case

pixmaps.o: pixmaps.c
	${CC} ${CFLAGS} ${IMLIB_CFLAGS} -c $< -o $@

